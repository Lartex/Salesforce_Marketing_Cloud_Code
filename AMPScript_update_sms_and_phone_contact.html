%%[

var @Id, @subscriberRows, @subscriberRow, @MobilePhone, @SMSOptIn__c
set @Id = _subscriberKey

if RequestParameter("SMSOptIn__c") != true then
  var @updateRecord
  set @MobilePhone = RequestParameter("MobilePhone")
  set @SMSOptIn__c = false
 
  set @updateRecord = UpdateSingleSalesforceObject(
      "Contact",@Id,
      "MobilePhone", @MobilePhone,
      "SMSOptIn__c", @SMSOptIn__c
)

else
  var @updateRecord
  set @MobilePhone = RequestParameter("MobilePhone")
  set @SMSOptIn__c = RequestParameter("SMSOptIn__c")
 
  set @updateRecord = UpdateSingleSalesforceObject(
      "Contact",@Id,
      "MobilePhone", @MobilePhone,
      "SMSOptIn__c", @SMSOptIn__c 
)

endif

]%%
<!DOCTYPE html>
<html>

<head>

</head>

<body>
    %%[ if RequestParameter("submitted") == true then ]%%
    <p>Record Updated</p>
    %%[ elseif RequestParameter("submitted") != true then then ]%%
    <h1>Please Update Your Phone Number and SMS Preference</h1>
    %%[ endif ]%%

    <form action="%%=RequestParameter('PAGEURL')=%%" method="post">
        
        <label>Mobile Phone</label>
        <input type="text" name="MobilePhone" value="%%=v(@MobilePhone)=%%" required>
        
        <label>SMS Opt-In</label>
        <input id="" type="checkbox" name="SMSOptIn__c" value="true">
        
        <span style="display:none;">%%=v(@SMSOptIn__c)=%%</span>
        
        <input name="submitted" type="hidden" value="true" />
        <input type="submit" value="Submit">
    </form>
</body>

</html>
